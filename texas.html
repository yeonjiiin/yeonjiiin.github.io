<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEXAS BINGO SHUFFLER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Serif+KR:wght@400;700&family=Rye&family=Jua&display=swap');
        
        :root {
            --west-gold: #d4af37;
            --west-brown: #3e2723;
            --west-leather: #5d4037;
            --west-paper: #e6d5b8;
        }

        body {
            background-color: #1a0f0a;
            background-image: 
                linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)),
                url('https://www.transparenttextures.com/patterns/dark-leather.png');
            font-family: 'Noto Serif KR', serif;
            user-select: none;
        }

        .western-font {
            font-family: 'Black Han Sans', sans-serif;
        }

        .classic-west {
            font-family: 'Rye', cursive;
        }

        /* Ïù¥Î≤§Ìä∏ Ïπ¥Îìú Ï†ÑÏö© Ìè∞Ìä∏ Ïä§ÌÉÄÏùº */
        .event-title-font {
            font-family: 'Jua', sans-serif;
            letter-spacing: 2px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.8), -1px -1px 0px rgba(255,255,255,0.1);
        }

        .vintage-paper {
            background-color: var(--west-paper);
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            box-shadow: inset 0 0 60px rgba(101, 67, 33, 0.3), 5px 10px 20px rgba(0,0,0,0.6);
            border: 1px solid #c4a484;
        }

        .wooden-sign-title {
            background: #4e342e;
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
            border: 2px solid #2a1b15;
            box-shadow: 0 4px 4px rgba(0,0,0,0.5);
            color: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .leather-btn {
            background: linear-gradient(to bottom, #8d6e63, #3e2723);
            border: 2px solid #26140d;
            color: #ede7f6;
            text-shadow: 2px 2px 2px rgba(0,0,0,0.8);
            border-bottom-width: 6px;
            position: relative;
            overflow: hidden;
        }
        
        .leather-btn::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url('https://www.transparenttextures.com/patterns/leather.png');
            opacity: 0.2;
            pointer-events: none;
        }

        .leather-btn:active { 
            transform: translateY(3px); 
            border-bottom-width: 3px;
        }

        .leather-btn.active { 
            border-color: var(--west-gold); 
            box-shadow: 0 0 15px var(--west-gold); 
            border-bottom-width: 6px;
        }

        .perspective-1000 { perspective: 1000px; }
        .card-inner {
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            cursor: pointer;
            position: relative;
            width: 100%;
            height: 100%;
        }
        .card-inner.is-flipped { transform: rotateY(180deg); }
        .card-front, .card-back {
            backface-visibility: hidden;
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 0.25rem;
        }
        .card-back { transform: rotateY(180deg); }
        
        .app-container {
            max-width: 28rem;
            width: 100%;
            background-color: var(--west-brown);
            background-image: url('https://www.transparenttextures.com/patterns/burnt-paper.png');
            border-radius: 1rem;
            padding: 1.5rem;
            border: 6px double var(--west-leather);
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.8);
            position: relative;
        }

        .sand-dust {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 60%, rgba(212, 175, 55, 0.05));
            pointer-events: none;
            z-index: 50;
        }
    </style>
</head>
<body class="text-stone-100 min-h-screen flex flex-col items-center p-4">

    <!-- Start Screen -->
    <div id="setup-screen" class="app-container text-center flex flex-col justify-center min-h-[600px]">
        <div class="sand-dust"></div>
        <header class="mb-12 relative z-10">
            <h1 class="text-4xl font-bold text-[#d4af37] mb-3 classic-west tracking-widest drop-shadow-[0_4px_6px_rgba(0,0,0,0.9)]">TEXAS BINGO</h1>
            <h2 class="text-xl font-bold text-[#d4af37]/80 classic-west tracking-[0.2em] drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]">CARD SHUFFLER</h2>
            <div class="w-32 h-1 bg-[#d4af37] mx-auto mt-6 shadow-lg"></div>
        </header>

        <div class="grid grid-cols-1 gap-5 mb-12 px-6 relative z-10">
            <button onclick="setPlayerCount(2)" class="player-opt-btn leather-btn py-5 rounded-lg text-2xl classic-west tracking-widest" data-count="2">2 PLAYERS</button>
            <button onclick="setPlayerCount(3)" class="player-opt-btn leather-btn py-5 rounded-lg text-2xl classic-west tracking-widest" data-count="3">3 PLAYERS</button>
            <button onclick="setPlayerCount(4)" class="player-opt-btn leather-btn py-5 rounded-lg text-2xl classic-west tracking-widest" data-count="4">4 PLAYERS</button>
        </div>

        <button onclick="startGame()" id="start-btn" class="mx-6 bg-[#d4af37] text-black py-5 rounded-lg text-2xl classic-west tracking-widest opacity-50 cursor-not-allowed transition-all border-b-6 border-[#9a7e28] active:border-b-2 active:translate-y-[4px]" disabled>
            START ADVENTURE
        </button>
    </div>

    <!-- Main Game UI -->
    <div id="game-screen" class="hidden app-container">
        <div class="sand-dust"></div>
        <header class="text-center mb-6 relative z-10">
            <h1 class="text-3xl font-bold text-[#d4af37] classic-west tracking-tighter">TEXAS BINGO</h1>
            <p id="player-indicator" class="text-[#a1887f] text-[10px] uppercase tracking-[0.3em] font-bold mt-1">Ready to Play</p>
        </header>

        <div class="flex justify-between items-center mb-6 bg-black/40 p-4 rounded-lg border-2 border-[#5d4037] relative z-10">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full border border-[#d4af37] flex items-center justify-center bg-stone-900 shadow-inner">
                    <span class="text-[#d4af37]">üéØ</span>
                </div>
                <div>
                    <span class="text-[9px] uppercase tracking-widest text-[#8d6e63] font-bold">REMAINING CARDS</span>
                    <div id="deck-count" class="text-xl font-mono font-bold text-[#ff9800]">-- / --</div>
                </div>
            </div>
            <!-- Quit Î≤ÑÌäº ÏàòÏ†ï: quitGame Ìï®Ïàò Ìò∏Ï∂ú -->
            <button onclick="quitGame()" class="leather-btn px-4 py-2 rounded-md text-[10px] font-bold uppercase classic-west tracking-widest">Quit</button>
        </div>

        <!-- Card Area -->
        <div id="card-area" class="relative h-80 w-full flex items-center justify-center gap-2 mb-8 relative z-10">
            <div id="card-display-1" class="vintage-paper w-60 h-80 rounded-sm border-2 border-[#5d4037] flex flex-col items-center justify-center text-center p-0 shadow-2xl relative overflow-hidden">
                <div class="opacity-10 absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/scratched-metal.png')]"></div>
                <span class="text-stone-700 italic classic-west text-2xl opacity-30">TEXAS</span>
            </div>
            <div id="card-display-2" class="hidden vintage-paper w-60 h-80 rounded-sm border-2 border-[#5d4037] flex flex-col items-center justify-center text-center p-0 shadow-2xl relative overflow-hidden">
            </div>
        </div>

        <!-- Tunnel View -->
        <div id="tunnel-container" class="hidden grid grid-cols-2 gap-3 mb-8 min-h-[18rem] relative z-10"></div>

        <button id="draw-btn" onclick="handleDrawClick()" class="w-full leather-btn py-5 rounded-lg shadow-2xl transition-all text-2xl classic-west tracking-widest relative z-10">
            DRAW CARD
        </button>

        <div id="event-desc-panel" class="hidden mt-4 p-4 bg-[#26140d]/80 rounded-lg border-2 border-[#d4af37]/30 relative z-10">
            <div class="flex gap-2 items-start">
                <span class="text-[#d4af37] text-lg">üìú</span>
                <p id="event-desc-text" class="text-[12px] text-[#e6d5b8] leading-relaxed font-medium italic"></p>
            </div>
        </div>
    </div>

    <!-- History Panel -->
    <div id="history-panel" class="hidden mt-8 w-full max-w-md relative z-10">
        <div class="flex items-center gap-2 px-2 mb-2">
            <div class="h-[1px] flex-1 bg-[#5d4037]"></div>
            <h3 class="text-[10px] font-bold text-[#8d6e63] uppercase tracking-[0.4em]">GAME LOGS</h3>
            <div class="h-[1px] flex-1 bg-[#5d4037]"></div>
        </div>
        <div id="history" class="flex flex-wrap gap-2 px-2"></div>
    </div>

    <script>
        let deck = [];
        let history = [];
        let playerCount = 0;
        let isForkActive = false;
        let tunnelPhase = 0;
        let initialDeckSize = 0;

        const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
        const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        const sandstormPatterns = [
            { name: "Ï¢åÏ∏° ÏÉÅÎã®", indices: [0, 1, 2, 5, 6, 7, 10, 11, 12] },
            { name: "Ïö∞Ï∏° ÏÉÅÎã®", indices: [2, 3, 4, 7, 8, 9, 12, 13, 14] },
            { name: "Ï¢åÏ∏° ÌïòÎã®", indices: [10, 11, 12, 15, 16, 17, 20, 21, 22] },
            { name: "Ïö∞Ï∏° ÌïòÎã®", indices: [12, 13, 14, 17, 18, 19, 22, 23, 24] }
        ];

        function setPlayerCount(num) {
            playerCount = num;
            document.querySelectorAll('.player-opt-btn').forEach(btn => {
                btn.classList.toggle('active', parseInt(btn.dataset.count) === num);
            });
            const startBtn = document.getElementById('start-btn');
            startBtn.disabled = false;
            startBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            startBtn.classList.add('hover:brightness-125');
        }

        function startGame() {
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            document.getElementById('history-panel').classList.remove('hidden');
            document.getElementById('player-indicator').innerText = `${playerCount} PLAYERS GAME`;
            initDeck();
        }

        // Í≤åÏûÑ Ï¢ÖÎ£å Î∞è Ï¥àÍ∏∞ ÌôîÎ©¥ Ïù¥Îèô Ìï®Ïàò
        function quitGame() {
            // Î™®Îì† Í≤åÏûÑ ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
            deck = [];
            history = [];
            playerCount = 0;
            isForkActive = false;
            tunnelPhase = 0;
            initialDeckSize = 0;

            // UI Í∞ÄÏãúÏÑ± Ï°∞Ï†à
            document.getElementById('setup-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('history-panel').classList.add('hidden');
            document.getElementById('tunnel-container').classList.add('hidden');
            document.getElementById('card-area').classList.remove('hidden');
            document.getElementById('card-display-2').classList.add('hidden');
            document.getElementById('event-desc-panel').classList.add('hidden');
            
            // Ïπ¥Îìú ÎîîÏä§ÌîåÎ†àÏù¥ Ï¥àÍ∏∞Ìôî
            const display1 = document.getElementById('card-display-1');
            display1.innerHTML = `
                <div class="opacity-10 absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/scratched-metal.png')]"></div>
                <span class="text-stone-700 italic classic-west text-2xl opacity-30">TEXAS</span>
            `;

            // Ïù∏ÏõêÏàò ÏÑ†ÌÉù Î≤ÑÌäº Ï¥àÍ∏∞Ìôî
            document.querySelectorAll('.player-opt-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            const startBtn = document.getElementById('start-btn');
            startBtn.disabled = true;
            startBtn.classList.add('opacity-50', 'cursor-not-allowed');
            startBtn.classList.remove('hover:brightness-125');
            
            // ÌûàÏä§ÌÜ†Î¶¨ Ï¥àÍ∏∞Ìôî
            updateHistory();
        }

        function initDeck() {
            deck = [];
            suits.forEach(suit => {
                values.forEach(val => {
                    deck.push({ type: 'normal', suit, val, label: suit + val });
                });
            });
            for(let i=0; i<4; i++) deck.push({ type: 'event', name: 'Í∞àÎ¶ºÍ∏∏', desc: 'Îëê Í∞àÎûò Í∏∏ÏûÖÎãàÎã§.<br>ÏõêÌïòÎäî Ïπ¥Îìú Ìïú Ïû•ÏùÑ Í≥®Îùº<br>ÎπôÍ≥†ÌåêÏóê ÏûÖÎ†•ÌïòÏã≠ÏãúÏò§.' });
            for(let i=0; i<4; i++) deck.push({ type: 'event', name: 'ÌÑ∞ÎÑê', desc: 'Ïñ¥ÎëêÏö¥ ÌÑ∞ÎÑêÏûÖÎãàÎã§.<br>ÎΩëÏùÄ Ïπ¥ÎìúÎ•º Í∞ÅÏûê ÌôïÏù∏ÌïòÍ≥†<br>ÎπÑÎ∞ÄÎ¶¨Ïóê ÏûÖÎ†•ÌïòÏã≠ÏãúÏò§.' });
            for(let i=0; i<4; i++) deck.push({ type: 'event', name: 'Î™®ÎûòÎ∞îÎûå', desc: 'Î™®ÎûòÎ∞îÎûåÏù¥ ÏãúÏïºÎ•º Í∞ÄÎ¶ΩÎãàÎã§.<br>ÌëúÏãúÎêú Íµ¨Ïó≠ÏùÄ Ïù¥Î≤à ÌÑ¥Ïóê<br>ÌÉÄÏùºÏùÑ ÎÜìÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.', patternIndex: i });
            
            initialDeckSize = deck.length;
            shuffle();
            updateUI();
        }

        function shuffle() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        function handleDrawClick() {
            if (tunnelPhase === 2) {
                tunnelPhase = 0;
                document.getElementById('tunnel-container').classList.add('hidden');
                document.getElementById('card-area').classList.remove('hidden');
                updateUI();
                return;
            }

            if (tunnelPhase === 1) {
                tunnelPhase = 2;
                displayTunnelSecretCards();
                updateUI();
                return;
            }

            if (isForkActive) {
                const drawn = drawValidCards(2);
                displayForkCards(drawn);
                isForkActive = false;
            } else {
                if (deck.length === 0) return;
                const card = deck.pop();
                if (card.name === 'ÌÑ∞ÎÑê') {
                    tunnelPhase = 1;
                    displaySingleCard(card);
                } else if (card.name === 'Í∞àÎ¶ºÍ∏∏') {
                    isForkActive = true;
                    displaySingleCard(card);
                } else {
                    displaySingleCard(card);
                }
            }
            updateUI();
        }

        function drawValidCards(count) {
            const result = [];
            const temp = [];
            while(result.length < count && deck.length > 0) {
                const c = deck.pop();
                if (c.type !== 'event') result.push(c);
                else temp.push(c);
            }
            if (temp.length > 0) {
                deck.push(...temp);
                shuffle(); 
            }
            return result;
        }

        function displaySingleCard(card) {
            const display1 = document.getElementById('card-display-1');
            document.getElementById('card-display-2').classList.add('hidden');
            addToHistory(card);
            renderCard(display1, card);
            showEventDesc(card);
        }

        function displayForkCards(cards) {
            const d1 = document.getElementById('card-display-1');
            const d2 = document.getElementById('card-display-2');
            d2.classList.remove('hidden');
            cards.forEach(c => addToHistory(c));
            if (cards[0]) renderCard(d1, cards[0]);
            if (cards[1]) renderCard(d2, cards[1]);
        }

        function displayTunnelSecretCards() {
            const container = document.getElementById('tunnel-container');
            const cardArea = document.getElementById('card-area');
            cardArea.classList.add('hidden');
            container.classList.remove('hidden');
            container.innerHTML = '';
            const tunnelCards = drawValidCards(playerCount);
            tunnelCards.forEach((card, idx) => {
                const cardWrapper = document.createElement('div');
                cardWrapper.className = "relative h-44 perspective-1000";
                cardWrapper.innerHTML = `
                    <div class="card-inner w-full h-full relative" onclick="this.classList.toggle('is-flipped')">
                        <div class="card-front vintage-paper border-2 border-[#5d4037] flex flex-col items-center justify-center rounded-lg shadow-xl">
                            <span class="text-stone-500 classic-west text-[10px] mb-2 uppercase">Player ${idx+1}</span>
                            <div class="text-4xl text-stone-300 font-bold">?</div>
                        </div>
                        <div class="card-back vintage-paper border-2 border-[#5d4037] flex flex-col items-center justify-center rounded-lg shadow-xl overflow-hidden">
                            <div id="tunnel-content-${idx}" class="flex flex-col items-center w-full h-full"></div>
                        </div>
                    </div>
                `;
                container.appendChild(cardWrapper);
                renderCard(cardWrapper.querySelector(`#tunnel-content-${idx}`), card, true);
            });
        }

        function renderCard(element, card, isSmall = false) {
            element.innerHTML = '';
            const sizeClass = isSmall ? 'text-4xl' : 'text-8xl';
            const valClass = isSmall ? 'text-2xl' : 'text-6xl';

            if (card.type === 'normal') {
                const color = (card.suit === '‚ô•' || card.suit === '‚ô¶') ? 'text-red-800' : 'text-stone-900';
                element.innerHTML = `
                    <div class="flex flex-col items-center justify-center h-full">
                        <div class="${color} ${sizeClass} mb-2 drop-shadow-md">${card.suit}</div>
                        <div class="${color} ${valClass} classic-west">${card.val}</div>
                    </div>
                `;
            } else if (card.type === 'event') {
                let body = '';
                if (card.name === 'Î™®ÎûòÎ∞îÎûå') body = renderSandstormGrid(sandstormPatterns[card.patternIndex], isSmall);
                else if (card.name === 'Í∞àÎ¶ºÍ∏∏') body = renderForkSignpost(isSmall);
                else body = renderEventIcon(card.name, isSmall);

                element.innerHTML = `
                    <div class="w-full h-full flex flex-col p-3 box-border relative">
                        <div class="wooden-sign-title w-full py-2 px-1 event-title-font text-center ${isSmall ? 'text-sm mb-1' : 'text-3xl mb-4'}">
                            ${card.name}
                        </div>
                        <div class="flex-grow flex items-center justify-center overflow-hidden">
                            ${body}
                        </div>
                        <div class="mt-auto border-t border-stone-800/20 pt-2 pb-1">
                            <p class="${isSmall ? 'text-[8px]' : 'text-[11px]'} text-stone-900 font-bold leading-tight text-center tracking-tight">
                                ${card.desc}
                            </p>
                        </div>
                    </div>
                `;
            }
        }

        function renderForkSignpost(isSmall) {
            const scale = isSmall ? 'scale-[0.6]' : 'scale-100';
            const boardColor = '#5d4037';
            const postColor = '#3e2723';
            
            return `
                <div class="relative w-40 h-32 flex flex-col items-center justify-end ${scale}">
                    <div class="absolute bottom-0 w-3 h-24 bg-[${postColor}] border-x border-black/30 rounded-t-sm shadow-md"></div>
                    <div class="absolute top-4 left-2 w-20 h-8 bg-[${boardColor}] border-2 border-[#26140d] shadow-lg rotate-[-12deg] flex items-center justify-center" style="clip-path: polygon(15% 0%, 100% 0%, 100% 100%, 15% 100%, 0% 50%);">
                         <div class="w-4 h-5 bg-white/40 border border-black/20 rounded-sm"></div>
                    </div>
                    <div class="absolute top-10 right-2 w-20 h-8 bg-[${boardColor}] border-2 border-[#26140d] shadow-lg rotate-[8deg] flex items-center justify-center" style="clip-path: polygon(0% 0%, 85% 0%, 100% 50%, 85% 100%, 0% 100%);">
                         <div class="w-4 h-5 bg-white/40 border border-black/20 rounded-sm"></div>
                    </div>
                    <div class="absolute bottom-0 w-16 h-1 bg-black/10 rounded-full blur-[1px]"></div>
                </div>
            `;
        }

        function renderSandstormGrid(pattern, isSmall) {
            const gridSize = isSmall ? 'w-16 h-16' : 'w-24 h-24';
            let html = `<div class="flex flex-col items-center">`;
            html += `<div class="grid grid-cols-5 gap-0.5 ${gridSize} bg-stone-700 p-0.5 border border-stone-900 shadow-inner">`;
            for(let i=0; i<25; i++) {
                html += `<div class="w-full h-full ${pattern.indices.includes(i) ? 'bg-orange-800 animate-pulse' : 'bg-stone-200'}"></div>`;
            }
            html += `</div>`;
            if(!isSmall) {
                html += `<div class="mt-2 bg-[#d4af37] text-black px-2 py-0.5 rounded text-[10px] font-bold tracking-tighter uppercase font-sans">${pattern.name}</div>`;
            }
            html += `</div>`;
            return html;
        }

        function renderEventIcon(name, isSmall) {
            const scale = isSmall ? 'scale-75' : 'scale-100';
            if (name === 'ÌÑ∞ÎÑê') return `
                <div class="relative w-28 h-20 bg-[#1a0f0a] rounded-t-full border-4 border-[#3e2723] flex items-center justify-center overflow-hidden shadow-2xl ${scale}">
                    <div class="absolute inset-0 bg-gradient-to-t from-transparent to-black opacity-60"></div>
                    <div class="w-8 h-12 bg-white rounded-sm border-2 border-stone-400 flex items-center justify-center font-bold text-stone-800 text-2xl classic-west z-10">?</div>
                </div>
            `;
            return '';
        }

        function addToHistory(card) {
            history.unshift(card);
            if(history.length > 20) history.pop();
            updateHistory();
        }

        function updateHistory() {
            const container = document.getElementById('history');
            container.innerHTML = history.map((c, i) => {
                let color = 'text-stone-400';
                let content = c.type === 'event' ? c.name : c.label;
                if (c.type === 'event') color = 'text-[#d4af37] font-bold';
                else if (c.suit === '‚ô•' || c.suit === '‚ô¶') color = 'text-red-500';
                return `<div class="px-2 py-1 bg-stone-900/80 border border-[#5d4037] rounded text-[9px] ${i === 0 ? 'ring-1 ring-[#d4af37]' : ''} ${color} classic-west">${content}</div>`;
            }).join('');
        }

        function showEventDesc(card) {
            const panel = document.getElementById('event-desc-panel');
            const text = document.getElementById('event-desc-text');
            if (card.type === 'event') {
                text.innerHTML = card.desc.replace(/<br>/g, ' ') + (card.name === 'Í∞àÎ¶ºÍ∏∏' ? "<br><span class='text-[#d4af37] text-[10px] font-bold'>[Îã§Ïùå Ïπ¥Îìú 2Ïû•Ïù¥ Í≥µÍ∞úÎê©ÎãàÎã§]</span>" : "");
                panel.classList.remove('hidden');
            } else { panel.classList.add('hidden'); }
        }

        function updateUI() {
            document.getElementById('deck-count').innerText = `${deck.length} / ${initialDeckSize || 64}`;
            const btn = document.getElementById('draw-btn');
            if (tunnelPhase === 1) {
                btn.innerText = "ENTER TUNNEL";
                btn.style.background = 'linear-gradient(to bottom, #d4af37, #9a7e28)';
                btn.style.color = '#000';
            } else if (tunnelPhase === 2) {
                btn.innerText = "LEAVE TUNNEL";
                btn.style.background = 'linear-gradient(to bottom, #424242, #212121)';
                btn.style.color = '#fff';
            } else {
                btn.innerText = isForkActive ? "CHOOSE PATH" : "DRAW CARD";
                btn.style.background = '';
                btn.style.color = '';
            }
            if (deck.length === 0 && !isForkActive && tunnelPhase === 0) {
                btn.disabled = true;
                btn.innerText = "EMPTY DECK";
                btn.classList.add('opacity-50');
            } else {
                btn.disabled = false;
                btn.classList.remove('opacity-50');
            }
        }
    </script>
</body>
</html>
